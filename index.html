<!doctype html>

<html>
    <head>
      <meta charset="utf-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="description" content="BlueJelly">
      <meta name="viewport" content="width=640, maximum-scale=1.0, user-scalable=yes">
      <title>HACKberryWirelessSensorTestWithChart</title>
      <link href="https://fonts.googleapis.com/css?family=Lato:100,300,400,700,900" rel="stylesheet" type="text/css">
      <link rel="stylesheet" href="style.css">
      <script type="text/javascript" src="bluejelly.js"></script>
      <script type="text/javascript" src="smoothie.js"></script>
    </head>

<body>
    <div class="container">
        <div class="title margin">
            <p id="title">HACKberry Wireless BLE Test</p>
        </div>

        <div class="contents margin">
            <button id="sensorScan" class="button">Scan Sensor</button>
            <button id="sensorStartNortifications" class="button">Start Notify</button>
            <button id="sensorStopNortifications" class="button">Stop Notify</button>
            <button id="sensorReset" class="button">Reset</button>
            <hr>
            <button id="startChartSync" class="button">Sync</button>
            <button id="stopChartSync" class="button">Stop</button>

            <hr>
            <canvas id="sensorChart" width="500" height="320"></canvas>

            <div id="sensorDeviceName"> DeviceName: </div>
            <div id="sensorSensorUUIDName"> UUID: </div>
            <div id="sensorSensorDataText"> SensorData: </div>
            <div id="sensorConnection"> Connection: </div>
            <div id="sensorConnectionStatus"> GATT: </div>
        </div>

        <div class="contents margin">
            <button id="handScan" class="button">Scan Hand</button>
            <button id="handBatteryRead" class="button">Read Battery</button>
            <button id="handdHandStatRead" class="button">Read Hand Status</button>
            <hr>
            <input id="handTargetValue" type="text" size="3" value="100">
            <button id="handTargetWrite" class="button">Write</button>
            <hr>
            <button id="handTargetStartSync" class="button">Sync</button>
            <button id="handTargetStopSync" class="button">Stop</button>
            <button id="handReset" class="button">Reset</button>
            <hr>
            <button id="handStartSensorTester" class="button">Start ST</button>
            <button id="handStopSensorTester" class="button">Stop ST</button>

            <hr>
            <div id="handDeviceName"> DeviceName: </div>
            <div id="handUUIDNameTarget"> TargetUUID: </div>
            <div id="handTargetDataText"> TargetData: </div>
            <div id="handUUIDNameBattery"> BatteryUUID: </div>
            <div id="handBatteryDataText"> BatteryData: </div>
            <div id="handUUIDNameHandStat"> HandStatUUID: </div>
            <div id="handHandStatDataText"> HandStatData: </div>
            <div id="handConnection"> Connection: </div>
            <div id="handConnectionStatusTarget"> GATT Target: </div>
            <div id="handConnectionStatusBattery"> GATT Battery: </div>
            <div id="handConnectionStatusHandStat"> GATT HandStat: </div>
        </div>
    </div>

    <script type="text/javascript" src="HACKberryWirelessBLECentral.js"></script>
    <script>
    /*
     * Events when buttons pressed
     */
    document.addEventListener("DOMContentLoaded", function() {
        document.getElementById('startChartSync').addEventListener('click', function() {
            startChartSync();
        })

        document.getElementById('stopChartSync').addEventListener('click', function() {
            stopChartSync();
        })

        document.getElementById('sensorScan').addEventListener('click', function() {
            bleSensor.scan('HbSensorSensorUUID');
        })

        document.getElementById('sensorStartNortifications').addEventListener('click', function() {
            bleSensor.startNotify('HbSensorSensorUUID');
        });

        document.getElementById('sensorStopNortifications').addEventListener('click', function() {
            bleSensor.stopNotify('HbSensorSensorUUID');
        });

        document.getElementById('sensorReset').addEventListener('click', function() {
            bleSensor.reset(); //reset is disconnect & clear
        });

        document.getElementById('handScan').addEventListener('click', function() {
            bleHand.scan('HbHandTargetUUID');
        });

        document.getElementById('handBatteryRead').addEventListener('click', function() {
            bleHand.read('HbHandBatteryUUID');
        });

        document.getElementById('handdHandStatRead').addEventListener('click', function() {
            bleHand.read('HbHandHandStatUUID');
        })

        document.getElementById('handTargetStartSync').addEventListener('click', function() {
            //bleHand.isSync = 1;
            startHandSync();
        });

        document.getElementById('handTargetStopSync').addEventListener('click', function() {
            //bleHand.isSync = 0;
            stopHandSync();
        });

        document.getElementById('handReset').addEventListener('click', function() {
            bleHand.reset();
        });

        document.getElementById('handTargetWrite').addEventListener('click', function() {
            //bleHand.write('HbHandTargetUUID', TargetValue);
            console.log('HTMLPAGE > ' + String( document.getElementById('handTargetValue').value ) )
            TargetValue = document.getElementById('handTargetValue').value;
            bleHand.write('HbHandTargetUUID', String(TargetValue));
        })

        document.getElementById('handStartSensorTester').addEventListener('click', function(){
            startSensorTester()
        });

        document.getElementById('handStopSensorTester').addEventListener('click', function() {
            stopSensorTester();
        });

    })

    </script>
</body>
</html>
